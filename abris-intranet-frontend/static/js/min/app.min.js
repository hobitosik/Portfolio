var myApp=angular.module("myApp",["ngRoute","ui.router","angular-jwt"]),api="http://192.168.132.41/api/";myApp.config(["$stateProvider",function(t){t.state("login",{url:"/login/",templateUrl:"static/views/auth.html",data:{bodyClasses:"auth onepage",title:"Log In"},controller:"AuthCtrl"}).state("main",{templateUrl:"static/views/main_container.html",controller:"MainContainerCtrl"}).state("main.search",{url:"/search_result/",templateUrl:"static/views/search_result.html",data:{title:"Search Result"},controller:"SearchCtrl"}).state("main.home",{url:"/home/",templateUrl:"static/views/home.html",data:{title:"Home"},controller:"HomeCtrl"}).state("main.home.activity",{url:"activity/",template:'<my_main_content page="activity"></my_main_content>',controller:"ActivityCtrl",data:{title:"Вся активность"}}).state("main.home.news",{url:"news/",template:'<my_main_content page="news"></my_main_content>',controller:"NewsCtrl",data:{title:"News"}}).state("main.home.ads",{url:"ads/",template:'<my_main_content page="ads"></my_main_content>',controller:"AdsCtrl",data:{title:"Объявления"}}).state("main.home.congrats",{url:"congrats/",template:'<my_main_content page="congrats"></my_main_content>',controller:"CongratsCtrl",data:{title:"Поздравления"}}).state("main.users",{url:"/users/",template:'<my_main_content page="users_list"></my_main_content>',data:{title:"Список сотрудников"},controller:"UsersCtrl"}).state("main.users.profile",{url:"profile/",views:{"@main":{template:'<my_main_content page="profile"></my_main_content>',controller:"ProfileCtrl"}},data:{title:"Profile"}}).state("main.company",{url:"/about/",templateUrl:"static/views/company.html",controller:"CompanyCtrl",data:{title:"О компании"}}).state("main.company.companyMission",{url:"company_mission/",views:{"@main":{templateUrl:"static/views/company_mission.html",controller:"CompanyMissionCtrl"}},data:{title:"Company Mission"}}).state("main.company.companyStructure",{url:"company_structure/",views:{"@main":{template:"<my_company_structure></my_company_structure>",controller:"CompanyStructureCtrl"}},data:{title:"Company Structure"}}).state("main.company.companyStructure.companyDetail",{url:"company_detail/",views:{"@main":{template:"<my_company_detail></my_company_detail>",controller:"CompanyDetailCtrl"}},data:{title:"Company Detail"}})}]),myApp.config(function(t,e){e.tokenGetter=["jwtHelper","$http",function(t,e){var a=localStorage.getItem("token");return e({url:api+"auth/token/refresh/",skipAuthorization:!0,method:"POST",data:{token:a}}).then(function(t){console.log("refreshing");var e=t.data.token;return localStorage.setItem("token",e),e},function(){return a})}],t.interceptors.push("jwtInterceptor")});