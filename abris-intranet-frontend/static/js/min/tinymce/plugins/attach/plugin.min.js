(function() {
 
   tinymce.create('tinymce.plugins.MicsLink', {
 
         // инициализируем плагин 
         // ed - экземляр редактора 
         // url - абсолютный url плагина 
      init : function(ed, url) {
 
            // Регестрирум комаду, для открытия окна плагина
          ed.addCommand('mceMics', function() {
 
             //  параметры окна
             ed.windowManager.open({
                 file: url + '/dialog.htm',
                width: 390 + ed.getLang('attach.delta_width', 0),
                 height: 150 + ed.getLang('attach.delta_height', 0),
                 inline: 1
             }, {
 
                 // данные для плагина - его абсолютный URL
                 plugin_url : url
 
             });
            });
 
            // регестрируем иконку плагина
            ed.addButton('attach', {
             title: 'Прикрепить файл',
             icon: 'icon-attach',
             // cmd: 'mceMics',
             // image: url + '/img/fileup.ico'
            });
        },
 
 
        // "Выходные данные" плагина
        getInfo : function() {
            return {
             longname : 'Upload file Plugin',
             author: 'devprodest outme',
               authorurl: 'http://www.outme.ru/',
             version: "0.1"
            };
        }
    });
 
 
    // Регестрируем плагин
      tinymce.PluginManager.add('attach', tinymce.plugins.MicsLink);
})();