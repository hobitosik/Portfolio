var kyco=kyco||{};kyco.apiPath="../api/easyshare.php",kyco.easyShare=function(){$("[data-easyshare]").length>0&&$("[data-easyshare]").each(function(){var a=$(this),t=a.data("easyshare-url"),e="undefined"==typeof t||""===t?window.location.href:t,o=a.find("[data-easyshare-total-count]"),r=a.find('[data-easyshare-button-count="facebook"]'),h=a.find('[data-easyshare-button-count="twitter"]'),s=a.find('[data-easyshare-button-count="google"]'),n=a.find("[data-easyshare-loader]");$.ajax({url:kyco.apiPath,type:"GET",data:{url:e},dataType:"json",success:function(a){0!=a.Total&&o.html(kyco.easyShareApproximate(a.Total)),0!=a.Facebook&&r.html(kyco.easyShareApproximate(a.Facebook)),0!=a.Twitter&&h.html(kyco.easyShareApproximate(a.Twitter)),0!=a.Google&&s.html(kyco.easyShareApproximate(a.Google)),n.fadeOut(500)},error:function(){o.html(0),r.html(0),h.html(0),s.html(0),console.log("error"),n.fadeOut(500)}}),a.find('[data-easyshare-button="facebook"]').click(function(){var a=500,t=400,o=($(window).width()-a)/2,r=($(window).height()-t)/2,h="https://www.facebook.com/sharer/sharer.php?u="+e,s="width="+a+",height="+t+",top="+r+",left="+o;window.open(h,"facebook",s)}),a.find('[data-easyshare-button="twitter"]').click(function(){var a=$(this).data("easyshare-tweet-text")||"",t=575,e=440,o=($(window).width()-t)/2,r=($(window).height()-e)/2,h="http://twitter.com/share?text="+encodeURIComponent(a),s="status=1,width="+t+",height="+e+",top="+r+",left="+o;window.open(h,"twitter",s)}),a.find('[data-easyshare-button="google"]').click(function(){var a=500,t=400,o=($(window).width()-a)/2,r=($(window).height()-t)/2,h="https://plus.google.com/share?url="+e,s="width="+a+",height="+t+",top="+r+",left="+o;window.open(h,"google+",s)})})},kyco.easyShareAddCommas=function(a){var t=[],e=Math.round(a).toString().split("");return 1e3>a?a.toString():(e.reverse().forEach(function(a,e){e&&e%3===0&&t.push(","),t.push(a)}),t.reverse().join(""))},kyco.easyShareFormatDecimals=function(a,t){var e=a/t;return 10>e?Math.round(10*e)/10:Math.round(e)},kyco.easyShareApproximate=function(a){var t,e=0>a;return e&&(a=Math.abs(a)),t=1e4>a?kyco.easyShareAddCommas(a):1e6>a?kyco.easyShareFormatDecimals(a,1e3)+"k":1e9>a?kyco.easyShareFormatDecimals(a,1e6)+"m":kyco.easyShareAddCommas(kyco.easyShareFormatDecimals(a,1e9))+"b",e&&(t="-"+t),t},$(document).ready(function(){kyco.easyShare(),$(window).scroll(function(){s_top=$("body").scrollTop(),whatsIt=$("#whatsIt").offset().top,s_top>whatsIt?$("[data-easyshare]").show():$("[data-easyshare]").hide()})});